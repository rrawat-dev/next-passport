{"ast":null,"code":"var passport = require('passport');\n\nvar LocalStrategy = require('passport-local').Strategy;\n\npassport.use(new LocalStrategy(function (username, password, done) {\n  return done(null, {\n    id: 'xxx'\n  });\n}));\npassport.serializeUser(function (user, done) {\n  done(null, user.id);\n});\npassport.deserializeUser(function (id, done) {\n  User.findById(id, function (err, user) {\n    done(err, user);\n  });\n});\nexport default passport.authenticate('local', {\n  successRedirect: '/success',\n  failureRedirect: '/login'\n});","map":{"version":3,"sources":["/Users/rakrawat/workspace/next-passport/pages/api/login.js"],"names":["passport","require","LocalStrategy","Strategy","use","username","password","done","id","serializeUser","user","deserializeUser","User","findById","err","authenticate","successRedirect","failureRedirect"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAIC,aAAa,GAAGD,OAAO,CAAC,gBAAD,CAAP,CAA0BE,QAA9C;;AAEAH,QAAQ,CAACI,GAAT,CAAa,IAAIF,aAAJ,CACX,UAASG,QAAT,EAAmBC,QAAnB,EAA6BC,IAA7B,EAAmC;AACjC,SAAOA,IAAI,CAAC,IAAD,EAAO;AAACC,IAAAA,EAAE,EAAE;AAAL,GAAP,CAAX;AACD,CAHU,CAAb;AAMAR,QAAQ,CAACS,aAAT,CAAuB,UAASC,IAAT,EAAeH,IAAf,EAAqB;AACxCA,EAAAA,IAAI,CAAC,IAAD,EAAOG,IAAI,CAACF,EAAZ,CAAJ;AACD,CAFH;AAIER,QAAQ,CAACW,eAAT,CAAyB,UAASH,EAAT,EAAaD,IAAb,EAAmB;AAC1CK,EAAAA,IAAI,CAACC,QAAL,CAAcL,EAAd,EAAkB,UAASM,GAAT,EAAcJ,IAAd,EAAoB;AACpCH,IAAAA,IAAI,CAACO,GAAD,EAAMJ,IAAN,CAAJ;AACD,GAFD;AAGD,CAJD;AAOF,eAAeV,QAAQ,CAACe,YAAT,CACP,OADO,EAEP;AACIC,EAAAA,eAAe,EAAE,UADrB;AAEIC,EAAAA,eAAe,EAAE;AAFrB,CAFO,CAAf","sourcesContent":["var passport = require('passport');\nvar LocalStrategy = require('passport-local').Strategy;\n\npassport.use(new LocalStrategy(\n  function(username, password, done) {\n    return done(null, {id: 'xxx'});\n  }\n));\n\npassport.serializeUser(function(user, done) {\n    done(null, user.id);\n  });\n  \n  passport.deserializeUser(function(id, done) {\n    User.findById(id, function(err, user) {\n      done(err, user);\n    });\n  });\n\n\nexport default passport.authenticate(\n        'local',\n        {\n            successRedirect: '/success',\n            failureRedirect: '/login'\n        }\n);"]},"metadata":{},"sourceType":"module"}